# Playtorium Discount Module

р╕гр╕░р╕Ър╕Ър╕Др╕│р╕Щр╕зр╕Ур╕кр╣Ир╕зр╕Щр╕ер╕Фр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Хр╕░р╕Бр╕гр╣Йр╕▓р╕кр╕┤р╕Щр╕Др╣Йр╕▓ р╕гр╕нр╕Зр╕гр╕▒р╕Ър╣Бр╕Др╕бр╣Ар╕Ыр╕Нр╕кр╣Ир╕зр╕Щр╕ер╕Фр╕лр╕ер╕▓р╕вр╕Ыр╕гр╕░р╣Ар╕ар╕Ч

## ЁЯЪА р╕зр╕┤р╕Шр╕╡р╕гр╕▒р╕Щр╣Вр╕Ыр╕гр╣Ар╕Ир╕Бр╕Хр╣М

### р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З Dependencies

```bash
npm install
```

### р╕гр╕▒р╕Щ Development Server

```bash
npm run dev
```

р╣Ар╕Ыр╕┤р╕Ф [http://localhost:3000](http://localhost:3000) р╣Гр╕Щр╣Ар╕Ър╕гр╕▓р╕зр╣Мр╣Ар╕Лр╕нр╕гр╣М

### р╕гр╕▒р╕Щ Tests

```bash
npm test
```

---

## ЁЯПЧя╕П р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕гр╕░р╕Ър╕Ъ

```
app/
тФЬтФАтФА components/          # React Components
тФВ   тФЬтФАтФА AddItemForm.tsx     # р╕Яр╕нр╕гр╣Мр╕бр╣Ар╕Юр╕┤р╣Ир╕бр╕кр╕┤р╕Щр╕Др╣Йр╕▓
тФВ   тФЬтФАтФА CartItems.tsx       # р╣Бр╕кр╕Фр╕Зр╕гр╕▓р╕вр╕Бр╕▓р╕гр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Гр╕Щр╕Хр╕░р╕Бр╕гр╣Йр╕▓
тФВ   тФЬтФАтФА CartSummary.tsx     # р╕кр╕гр╕╕р╕Ыр╕вр╕нр╕Фр╣Бр╕ер╕░р╕кр╣Ир╕зр╕Щр╕ер╕Ф
тФВ   тФФтФАтФА DiscountForm.tsx    # р╕Яр╕нр╕гр╣Мр╕бр╣Гр╕кр╣Ир╕кр╣Ир╕зр╕Щр╕ер╕Ф
тФЬтФАтФА context/
тФВ   тФФтФАтФА CartContext.tsx     # State management (React Context)
тФЬтФАтФА lib/
тФВ   тФФтФАтФА discountCalculator.ts  # Logic р╕Др╕│р╕Щр╕зр╕Ур╕кр╣Ир╕зр╕Щр╕ер╕Ф (Core)
тФЬтФАтФА types/
тФВ   тФФтФАтФА index.ts            # TypeScript Types
тФЬтФАтФА page.tsx                # р╕лр╕Щр╣Йр╕▓р╕лр╕ер╕▒р╕Б
тФФтФАтФА layout.tsx              # Layout wrapper
```

### Core Logic: `discountCalculator.ts`

р╣Др╕Яр╕ер╣Мр╕лр╕ер╕▒р╕Бр╕Чр╕╡р╣Ир╕Др╕│р╕Щр╕зр╕Ур╕кр╣Ир╕зр╕Щр╕ер╕Фр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф:

| Function | р╕лр╕Щр╣Йр╕▓р╕Чр╕╡р╣И |
|----------|--------|
| `calculateCart()` | р╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╕лр╕ер╕▒р╕Б р╕гр╕▒р╕Ъ items + campaigns р╣Бр╕ер╣Йр╕зр╕Др╕╖р╕Щр╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М |
| `calculateFixedAmountDiscount()` | р╕Др╕│р╕Щр╕зр╕У Coupon р╣Бр╕Ър╕Ър╕ер╕Фр╣Ар╕Зр╕┤р╕Щр╕Хр╕гр╕З |
| `calculatePercentageDiscount()` | р╕Др╕│р╕Щр╕зр╕У Coupon р╣Бр╕Ър╕Ър╣Ар╕Ыр╕нр╕гр╣Мр╣Ар╕Лр╣Зр╕Щр╕Хр╣М |
| `calculateCategoryDiscount()` | р╕Др╕│р╕Щр╕зр╕Ур╕кр╣Ир╕зр╕Щр╕ер╕Фр╕Хр╕▓р╕бр╕лр╕бр╕зр╕Фр╕лр╕бр╕╣р╣Ир╕кр╕┤р╕Щр╕Др╣Йр╕▓ |
| `calculatePointsDiscount()` | р╕Др╕│р╕Щр╕зр╕Ур╕кр╣Ир╕зр╕Щр╕ер╕Фр╕Ир╕▓р╕Б Points (р╕кр╕╣р╕Зр╕кр╕╕р╕Ф 20%) |
| `calculateSeasonalDiscount()` | р╕Др╕│р╕Щр╕зр╕Ур╕кр╣Ир╕зр╕Щр╕ер╕Фр╕Хр╕▓р╕бр╕вр╕нр╕Фр╕Лр╕╖р╣Йр╕н (р╕Чр╕╕р╕Б X р╕Ър╕▓р╕Ч р╕ер╕Ф Y р╕Ър╕▓р╕Ч) |
| `sortCampaignsByCategory()` | р╣Ар╕гр╕╡р╕вр╕Зр╕ер╕│р╕Фр╕▒р╕Ър╣Бр╕Др╕бр╣Ар╕Ыр╕Нр╕Хр╕▓р╕бр╕лр╕бр╕зр╕Ф |
| `filterOneCampaignPerCategory()` | р╕Бр╕гр╕нр╕Зр╣Гр╕лр╣Йр╣Ар╕лр╕ер╕╖р╕н 1 р╣Бр╕Др╕бр╣Ар╕Ыр╕Нр╕Хр╣Ир╕нр╕лр╕бр╕зр╕Ф |

---

## ЁЯУЛ р╕Ыр╕гр╕░р╣Ар╕ар╕Чр╕кр╣Ир╕зр╕Щр╕ер╕Фр╕Чр╕╡р╣Ир╕гр╕нр╕Зр╕гр╕▒р╕Ъ

### 1. Coupon (р╣Ар╕ер╕╖р╕нр╕Бр╣Гр╕Кр╣Йр╣Др╕Фр╣Й 1 р╕нр╕вр╣Ир╕▓р╕З)
- **Fixed Amount** - р╕ер╕Фр╣Ар╕Зр╕┤р╕Щр╕Хр╕гр╕З р╣Ар╕Кр╣Ир╕Щ р╕ер╕Ф 50 р╕Ър╕▓р╕Ч
- **Percentage** - р╕ер╕Фр╣Ар╕Ыр╕нр╕гр╣Мр╣Ар╕Лр╣Зр╕Щр╕Хр╣М р╣Ар╕Кр╣Ир╕Щ р╕ер╕Ф 10%

### 2. On Top (р╣Ар╕ер╕╖р╕нр╕Бр╣Гр╕Кр╣Йр╣Др╕Фр╣Й 1 р╕нр╕вр╣Ир╕▓р╕З)
- **Category Discount** - р╕ер╕Фр╣Ар╕Йр╕Юр╕▓р╕░р╕лр╕бр╕зр╕Фр╕лр╕бр╕╣р╣И р╣Ар╕Кр╣Ир╕Щ Clothing р╕ер╕Ф 15%
- **Points** - р╣Гр╕Кр╣Йр╣Бр╕Хр╣Йр╕бр╣Бр╕ер╕Бр╕кр╣Ир╕зр╕Щр╕ер╕Ф (1 р╣Бр╕Хр╣Йр╕б = 1 р╕Ър╕▓р╕Ч, р╕кр╕╣р╕Зр╕кр╕╕р╕Ф 20% р╕Вр╕нр╕Зр╕вр╕нр╕Ф)

### 3. Seasonal (р╣Ар╕ер╕╖р╕нр╕Бр╣Гр╕Кр╣Йр╣Др╕Фр╣Й 1 р╕нр╕вр╣Ир╕▓р╕З)
- **Special Campaign** - р╕Чр╕╕р╕Б X р╕Ър╕▓р╕Ч р╕ер╕Ф Y р╕Ър╕▓р╕Ч р╣Ар╕Кр╣Ир╕Щ р╕Чр╕╕р╕Б 300 р╕Ър╕▓р╕Ч р╕ер╕Ф 40 р╕Ър╕▓р╕Ч

### р╕ер╕│р╕Фр╕▒р╕Ър╕Бр╕▓р╕гр╕Др╕│р╕Щр╕зр╕У
```
р╕гр╕▓р╕Др╕▓р╕кр╕┤р╕Щр╕Др╣Йр╕▓ тЖТ Coupon тЖТ On Top тЖТ Seasonal тЖТ р╕гр╕▓р╕Др╕▓р╕кр╕╕р╕Фр╕Чр╣Йр╕▓р╕в
```

---

## ЁЯТб р╕кр╕бр╕бр╕Хр╕┤р╕Рр╕▓р╕Щр╕Чр╕╡р╣Ир╣Гр╕Кр╣Й

1. **р╕лр╕бр╕зр╕Фр╕лр╕бр╕╣р╣Ир╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕бр╕╡ 3 р╕Ыр╕гр╕░р╣Ар╕ар╕Ч**: Clothing, Accessories, Electronics
2. **р╣Гр╕Кр╣Йр╣Бр╕Др╕бр╣Ар╕Ыр╕Нр╣Др╕Фр╣Й 1 р╕нр╕вр╣Ир╕▓р╕Зр╕Хр╣Ир╕нр╕лр╕бр╕зр╕Ф**: р╕Цр╣Йр╕▓р╣Ар╕Юр╕┤р╣Ир╕б Coupon р╣Гр╕лр╕бр╣Ир╕Ир╕░р╣Бр╕Чр╕Щр╕Чр╕╡р╣Ир╕нр╕▒р╕Щр╣Ар╕Фр╕┤р╕б
3. **р╕гр╕▓р╕Др╕▓р╕кр╕╕р╕Фр╕Чр╣Йр╕▓р╕вр╣Др╕бр╣Ир╕Хр╕┤р╕Фр╕ер╕Ъ**: р╕Цр╣Йр╕▓р╕кр╣Ир╕зр╕Щр╕ер╕Фр╕бр╕▓р╕Бр╕Бр╕зр╣Ир╕▓р╕гр╕▓р╕Др╕▓ р╕Ир╕░р╣Др╕Фр╣Йр╕гр╕▓р╕Др╕▓ 0 р╕Ър╕▓р╕Ч
4. **Points р╕ер╕Фр╣Др╕Фр╣Йр╕кр╕╣р╕Зр╕кр╕╕р╕Ф 20%**: р╕Цр╣Йр╕▓р╣Гр╕Кр╣Й 100 р╣Бр╕Хр╣Йр╕б р╣Бр╕Хр╣И 20% = 50 р╕Ър╕▓р╕Ч р╕Ир╕░р╕ер╕Фр╣Др╕Фр╣Йр╣Бр╕Др╣И 50 р╕Ър╕▓р╕Ч
5. **р╕кр╣Ир╕зр╕Щр╕ер╕Фр╕Др╕│р╕Щр╕зр╕Ур╕Ир╕▓р╕Бр╕вр╕нр╕Фр╕лр╕ер╕▒р╕Зр╕лр╕▒р╕Бр╕кр╣Ир╕зр╕Щр╕ер╕Фр╕Бр╣Ир╕нр╕Щр╕лр╕Щр╣Йр╕▓**: 
   - Coupon р╕Др╕│р╕Щр╕зр╕Ур╕Ир╕▓р╕Б subtotal
   - On Top р╕Др╕│р╕Щр╕зр╕Ур╕Ир╕▓р╕Бр╕вр╕нр╕Фр╕лр╕ер╕▒р╕Зр╕лр╕▒р╕Б Coupon
   - Seasonal р╕Др╕│р╕Щр╕зр╕Ур╕Ир╕▓р╕Бр╕вр╕нр╕Фр╕лр╕ер╕▒р╕Зр╕лр╕▒р╕Б Coupon + On Top

---

## тЪая╕П р╕Вр╣Йр╕нр╕Ир╕│р╕Бр╕▒р╕Ф

1. **р╣Др╕бр╣Ир╕бр╕╡ Backend**: р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕Бр╣Зр╕Ър╣Гр╕Щ Memory р╕Ьр╣Ир╕▓р╕Щ React Context (refresh р╣Бр╕ер╣Йр╕зр╕лр╕▓р╕в)
2. **р╣Др╕бр╣Ир╕бр╕╡р╕гр╕░р╕Ър╕Ъ Authentication**: р╣Др╕бр╣Ир╕бр╕╡ User login
3. **р╣Др╕бр╣Ир╕бр╕╡р╕Бр╕▓р╕гр╕Ър╕▒р╕Щр╕Чр╕╢р╕Б Points р╕Ир╕гр╕┤р╕З**: Points р╣Гр╕кр╣Ир╣Др╕Фр╣Йр╣Ар╕ер╕вр╣Вр╕Фр╕вр╣Др╕бр╣Ир╕Хр╣Йр╕нр╕Зр╕бр╕╡р╕вр╕нр╕Фр╕кр╕░р╕кр╕б

---

## ЁЯФо р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╕нр╕вр╕▓р╕Бр╕Юр╕▒р╕Тр╕Щр╕▓р╕Хр╣Ир╕н

1. **Backend API**: р╣Гр╕Кр╣Й Next.js API Routes р╕лр╕гр╕╖р╕нр╣Бр╕вр╕Б Backend
2. **Database**: р╣Ар╕Бр╣Зр╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕┤р╕Щр╕Др╣Йр╕▓, р╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤р╕Бр╕▓р╕гр╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕н
3. **Unit Tests**: р╣Ар╕Юр╕┤р╣Ир╕б Test Coverage р╕кр╕│р╕лр╕гр╕▒р╕Ъ discount logic
4. **Multiple Coupons**: р╕гр╕нр╕Зр╕гр╕▒р╕Ър╣Гр╕Кр╣Йр╕лр╕ер╕▓р╕в Coupon р╕Юр╕гр╣Йр╕нр╕бр╕Бр╕▒р╕Щ (р╕Цр╣Йр╕▓р╣Вр╕Ир╕Чр╕вр╣Мр╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕г)
5. **Discount Code**: р╣Гр╕кр╣Ир╣Вр╕Др╣Йр╕Фр╕кр╣Ир╕зр╕Щр╕ер╕Фр╣Бр╕Чр╕Щр╕Бр╕▓р╕гр╣Ар╕ер╕╖р╕нр╕Бр╕Ир╕▓р╕Б dropdown

---

## ЁЯЫая╕П Tech Stack

- **Framework**: Next.js 15 (App Router)
- **Language**: TypeScript
- **Styling**: Tailwind CSS
- **State Management**: React Context API

